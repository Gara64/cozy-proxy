// Generated by CoffeeScript 1.10.0
var getProxy, router, statusChecker;

getProxy = require('../lib/proxy').getProxy;

router = require('../lib/router');

statusChecker = require('../lib/status_checker');

module.exports.defaultRedirect = function(req, res) {
  var homePort;
  homePort = process.env.DEFAULT_REDIRECT_PORT;
  return getProxy().web(req, res, {
    target: "http://localhost:" + homePort
  });
};

module.exports.showRoutes = function(req, res) {
  return res.status(200).send(router.getRoutes());
};

module.exports.resetRoutes = function(req, res, next) {
  return router.reset(function(error) {
    if (error != null) {
      return next(new Error(error));
    } else {
      return res.status(200).send({
        success: true
      });
    }
  });
};

module.exports.status = function(req, res, next) {
  return statusChecker.checkAllStatus(function(err, status) {
    if (err) {
      return next(new Error(err));
    } else {
      return res.send(status);
    }
  });
};
