// Generated by CoffeeScript 1.10.0
var getProxy;

getProxy = require('../lib/proxy').getProxy;

module.exports.request = function(req, res, next) {
  var homePort, target;
  console.log('request for a new sharing');
  console.log('req : ' + req.baseUrl);

  /*TODO: the incoming request should be in this form :
  (see owncloud)
  sender
  sharing id
  description
  options (synced, bilateral, master/p2P, etc)
  
  the receiver should generate a password for this sharing
   */
  homePort = process.env.DEFAULT_REDIRECT_PORT;
  target = "http://localhost:" + homePort;
  return getProxy().web(req, res, {
    target: target
  });
};

module.exports.answer = function(req, res, next) {
  return console.log('answer for a new sharing');
};
